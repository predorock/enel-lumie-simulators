{
    "pages": [
        {
            "id": "client-selection",
            "title": "Chiedi al cliente di raccontarti qualcosa sulla sua casa",
            "step": 1,
            "validationRules": {
                "required": ["storeLocation", "consultantName", "storePhone", "storeCity"]
            },
            "leftPanelComponents": [
                {
                    "type": "Image",
                    "props": {
                        "src": "italy",
                        "alt": "Italy",
                        "className": "z-10 relative w-auto h-auto",
                        "containerClassName": "flex justify-center items-center mt-16"
                    }
                }
            ],
            "components": [
                {
                    "type": "DescriptionBox",
                    "props": {
                        "title": "Dati punto vendita",
                        "description": "Inserisci le informazioni sul punto vendita"
                    }
                },
                {
                    "type": "TextInput",
                    "props": {
                        "placeholder": "Nome punto vendita",
                        "initialValue": "",
                        "type": "text",
                        "stateProperty": "storeLocation",
                        "className": "max-w-[358px]"
                    }
                },
                {
                    "type": "TextInput",
                    "props": {
                        "placeholder": "Nome e cognome del consulente",
                        "initialValue": "",
                        "type": "text",
                        "stateProperty": "consultantName"
                    }
                },
                {
                    "type": "TextInput",
                    "props": {
                        "placeholder": "Telefono punto vendita",
                        "initialValue": "",
                        "type": "text",
                        "stateProperty": "storePhone"
                    }
                },
                {
                    "type": "Divider",
                    "props": {
                        "color": "#c2cddd",
                        "spacing": "32px"
                    }
                },
                {
                    "type": "DescriptionBox",
                    "props": {
                        "title": "Dove si trova la casa del cliente?",
                        "description": "Spiega che con questa informazione possiamo tenere in considerazione fattori climatici, geografici e ambientali, e proporre stime di risparmio più precise."
                    }
                },
                {
                    "type": "AsyncSelect",
                    "props": {
                        "placeholder": "Città",
                        "label": "Città",
                        "stateProperty": "storeCity",
                        "loadDataAction": "loadCities",
                        "stateSlice": "cityState",
                        "searchable": true,
                        "searchPlaceholder": "Cerca città...",
                        "maxHeight": "250px"
                    }
                },
                {
                    "type": "Divider",
                    "props": {
                        "color": "#c2cddd",
                        "spacing": "32px"
                    }
                },
                {
                    "type": "Toggle",
                    "props": {
                        "label": "Si tratta di un cliente Enel",
                        "stateProperty": "isEnelCustomer",
                        "initialValue": false
                    }
                }
            ]
        },
        {
            "id": "checklist-configuratore",
            "title": "Configurate insieme il climatizzatore!",
            "step": 2,
            "validationRules": {
                "custom": [
                    {
                        "type": "minQuantity",
                        "property": "airconditioningQuantities",
                        "minTotal": 1,
                        "errorMessage": "Almeno un climatizzatore deve essere selezionato"
                    },
                    {
                        "type": "airConditioningConfig",
                        "property": "airConditioningConfigs",
                        "dependsOn": "airconditioningQuantities",
                        "errorMessage": "Completare la configurazione per tutti i climatizzatori selezionati"
                    }
                ]
            },
            "leftPanelComponents": [
                {
                    "type": "Image",
                    "props": {
                        "src": "condizionatore-big",
                        "alt": "Condizionatore",
                        "className": "z-10 relative w-auto h-auto max-w-[280px] mt-8",
                        "containerClassName": "flex justify-center items-center flex-1"
                    }
                },
                {
                    "type": "CostSummary",
                    "props": {
                        "containerClassName": "mt-auto mb-4 self-end"
                    }
                }
            ],
            "components": [
                {
                    "type": "DescriptionBox",
                    "props": {
                        "title": "Quanti impianti vuole acquistare il cliente?",
                        "description": "Il cliente può indicare un massimo di 3 split totali"
                    }
                },
                {
                    "type": "SplitterQtyConfigurator",
                    "props": {
                        "items": [
                            {
                                "key": "monosplit",
                                "label": "Monosplit"
                            },
                            {
                                "key": "dualsplit",
                                "label": "Dualsplit"
                            },
                            {
                                "key": "trialsplit",
                                "label": "Trialsplit"
                            }
                        ],
                        "min": 0,
                        "max": 3,
                        "totalMax": 3,
                        "stateProperty": "airconditioningQuantities",
                        "calculationType": "purchase",
                        "showPriceDisplay": false
                    }
                },
                {
                    "type": "Divider",
                    "props": {
                        "color": "#c2cddd",
                        "spacing": "40px"
                    },
                    "renderConditions": {
                        "hasQuantities": "airconditioningQuantities"
                    }
                },
                {
                    "type": "AirConditioningConfigurator",
                    "props": {
                        "stateProperty": "airConditioningConfigs",
                        "showOnlyWhenQuantitiesExist": true,
                        "installationTypes": [
                            {
                                "value": "nuova_con_predisposizione",
                                "label": "Nuova installazione con predisposizione"
                            },
                            {
                                "value": "nuova_senza_predisposizione",
                                "label": "Nuova installazione senza predisposizione"
                            },
                            {
                                "value": "sostituzione_monosplit",
                                "label": "Sostituzione monosplit"
                            },
                            {
                                "value": "sostituzione_dualsplit",
                                "label": "Sostituzione dualsplit"
                            },
                            {
                                "value": "sostituzione_trialsplit",
                                "label": "Sostituzione trialsplit"
                            }
                        ],
                        "infoIconKey": "airConditioningInfo"
                    },
                    "renderConditions": {
                        "hasQuantities": "airconditioningQuantities"
                    }
                },
                {
                    "type": "InfoBanner",
                    "props": {
                        "title": "Il cliente non ha predisposizioni riutilizzabili o installazioni con unità interna in adiacenza a quella esterna?",
                        "description": "Spiegagli che le connessioni tra unità esterna ed interna sono realizzate in canaline a vista",
                        "variant": "info"
                    },
                    "renderConditions": {
                        "hasQuantities": "airconditioningQuantities"
                    }
                }
            ]
        },
        {
            "id": "servizi-manutenzione",
            "title": "Configurate insieme il climatizzatore!",
            "step": 2,
            "validationRules": {
                "conditional": [
                    {
                        "condition": {
                            "property": "needsRemoval",
                            "equals": true
                        },
                        "then": {
                            "type": "minQuantity",
                            "property": "removalQuantities",
                            "minTotal": 1,
                            "errorMessage": "Seleziona almeno un impianto da smontare"
                        }
                    },
                    {
                        "condition": {
                            "property": "wantsCleaning",
                            "equals": true
                        },
                        "then": {
                            "type": "minQuantity",
                            "property": "cleaningQuantities",
                            "minTotal": 1,
                            "errorMessage": "Seleziona almeno un impianto da lavare"
                        }
                    }
                ]
            },
            "leftPanelComponents": [
                {
                    "type": "Image",
                    "props": {
                        "src": "condizionatore-big",
                        "alt": "Condizionatore",
                        "className": "z-10 relative w-auto h-auto max-w-[280px] mt-8",
                        "containerClassName": "flex justify-center items-center flex-1"
                    }
                },
                {
                    "type": "CostSummary",
                    "props": {
                        "containerClassName": "mt-auto mb-4 self-end"
                    }
                }
            ],
            "components": [
                {
                    "type": "DescriptionBox",
                    "props": {
                        "title": "Il cliente ha necessità di smontare dei climatizzatori già installati?",
                        "description": ""
                    }
                },
                {
                    "type": "Toggle",
                    "props": {
                        "label": "Il cliente deve smontare dei climatizzatori installati in precedenza",
                        "stateProperty": "needsRemoval",
                        "initialValue": false,
                        "storeAction": "checkRemoval"
                    }
                },
                {
                    "type": "DescriptionBox",
                    "props": {
                        "title": "Indica quanti impianti devono essere smontati",
                        "description": ""
                    },
                    "renderConditions": {
                        "equals": {
                            "property": "needsRemoval",
                            "value": true
                        }
                    }
                },
                {
                    "type": "SplitterQtyConfigurator",
                    "props": {
                        "items": [
                            {
                                "key": "monosplit",
                                "label": "Monosplit"
                            },
                            {
                                "key": "dualsplit",
                                "label": "Dualsplit"
                            },
                            {
                                "key": "trialsplit",
                                "label": "Trialsplit"
                            }
                        ],
                        "min": 0,
                        "max": 10,
                        "totalMax": 10,
                        "stateProperty": "removalQuantities",
                        "calculationType": "removal",
                        "showPriceDisplay": true
                    },
                    "renderConditions": {
                        "equals": {
                            "property": "needsRemoval",
                            "value": true
                        }
                    }
                },
                {
                    "type": "Divider",
                    "props": {
                        "color": "#c2cddd",
                        "spacing": "40px"
                    }
                },
                {
                    "type": "DescriptionBox",
                    "props": {
                        "title": "Consiglia al cliente di effettuare il lavaggio dell'impianto",
                        "description": ""
                    }
                },
                {
                    "type": "Toggle",
                    "props": {
                        "label": "Il cliente vuole effettuare il lavaggio degli impianti?",
                        "stateProperty": "wantsCleaning",
                        "initialValue": false,
                        "storeAction": "checkCleaning"
                    }
                },
                {
                    "type": "DescriptionBox",
                    "props": {
                        "title": "Indica quanti impianti devono essere lavati",
                        "description": ""
                    },
                    "renderConditions": {
                        "equals": {
                            "property": "wantsCleaning",
                            "value": true
                        }
                    }
                },
                {
                    "type": "SplitterQtyConfigurator",
                    "props": {
                        "items": [
                            {
                                "key": "monosplit",
                                "label": "Monosplit"
                            },
                            {
                                "key": "dualsplit",
                                "label": "Dualsplit"
                            },
                            {
                                "key": "trialsplit",
                                "label": "Trialsplit"
                            }
                        ],
                        "min": 0,
                        "max": 10,
                        "totalMax": 10,
                        "stateProperty": "cleaningQuantities",
                        "calculationType": "cleaning",
                        "showPriceDisplay": true
                    },
                    "renderConditions": {
                        "equals": {
                            "property": "wantsCleaning",
                            "value": true
                        }
                    }
                }
            ]
        }
    ]
}